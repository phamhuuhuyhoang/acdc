Version 4
SHEET 1 3172 1692
WIRE -80 64 -96 64
WIRE -64 64 -80 64
WIRE 288 64 176 64
WIRE 320 64 288 64
WIRE 448 64 400 64
WIRE 512 64 448 64
WIRE 592 64 512 64
WIRE 720 64 672 64
WIRE 800 64 720 64
WIRE 448 96 448 64
WIRE -64 128 -64 64
WIRE 176 128 176 64
WIRE 448 192 448 160
WIRE 64 256 64 224
WIRE 64 272 64 256
WIRE 1920 560 1872 560
WIRE -176 576 -240 576
WIRE -160 576 -176 576
WIRE -96 576 -160 576
WIRE 0 576 -32 576
WIRE 48 576 0 576
WIRE 96 576 48 576
WIRE 192 576 160 576
WIRE 304 576 272 576
WIRE 352 576 304 576
WIRE 384 576 352 576
WIRE 400 576 384 576
WIRE 496 576 480 576
WIRE 512 576 496 576
WIRE 384 608 384 576
WIRE 496 608 496 576
WIRE 1872 608 1872 560
WIRE 400 624 384 608
WIRE 480 624 496 608
WIRE 1872 640 1872 608
WIRE -176 656 -176 576
WIRE -160 656 -176 656
WIRE -32 656 -80 656
WIRE 48 656 48 576
WIRE 48 656 32 656
WIRE 400 688 400 624
WIRE 480 688 480 624
WIRE 48 704 48 656
WIRE 112 704 48 704
WIRE 304 704 304 576
WIRE 304 704 192 704
WIRE 48 752 48 704
WIRE 48 752 -16 752
WIRE -176 768 -176 656
WIRE -80 768 -176 768
WIRE 64 784 -16 784
WIRE 64 832 64 784
WIRE 112 832 64 832
WIRE 256 832 192 832
WIRE 1952 864 1872 864
WIRE 2080 864 2016 864
WIRE -144 880 -176 880
WIRE -16 880 -64 880
WIRE 64 880 64 832
WIRE 64 880 48 880
WIRE 64 896 64 880
WIRE 192 896 64 896
WIRE 320 896 320 832
WIRE 320 896 272 896
WIRE 2256 896 2256 864
WIRE 2304 896 2304 864
WIRE 2224 928 2256 896
WIRE 2336 928 2304 896
WIRE 1872 944 1872 864
WIRE 1888 944 1872 944
WIRE 2000 944 1968 944
WIRE 2080 944 2080 864
WIRE 2080 944 2064 944
WIRE 320 960 320 896
WIRE 2080 976 2080 944
WIRE 2128 976 2080 976
WIRE 2224 976 2224 928
WIRE 2224 976 2208 976
WIRE 2240 976 2224 976
WIRE 2336 976 2336 928
WIRE 2336 976 2320 976
WIRE 2352 976 2336 976
WIRE -176 992 -176 880
WIRE -176 992 -256 992
WIRE -96 992 -176 992
WIRE 64 992 64 896
WIRE 64 992 -32 992
WIRE 2080 1040 2080 976
WIRE 2080 1040 2032 1040
WIRE 1872 1056 1872 944
WIRE 1968 1056 1872 1056
WIRE 320 1072 320 1040
WIRE 2096 1072 2032 1072
WIRE 1840 1104 1872 1056
WIRE 1840 1104 1808 1104
WIRE 2096 1120 2096 1072
WIRE 2128 1120 2096 1120
WIRE 2240 1120 2208 1120
WIRE 2304 1120 2240 1120
WIRE 1888 1200 1872 1200
WIRE 2000 1200 1968 1200
WIRE 2096 1200 2096 1120
WIRE 2096 1200 2064 1200
WIRE 1872 1264 1872 1200
WIRE 1872 1264 1840 1264
WIRE 1952 1264 1872 1264
WIRE 2096 1264 2096 1200
WIRE 2096 1264 2016 1264
FLAG 176 208 0
FLAG 288 64 SW
FLAG -96 64 IN
IOPIN -96 64 BiDir
FLAG 800 64 OUT
IOPIN 800 64 BiDir
FLAG 64 352 0
FLAG 64 256 d
FLAG 720 64 OUT
FLAG 400 688 B
IOPIN 400 688 BiDir
FLAG 480 688 A
IOPIN 480 688 BiDir
FLAG 448 192 0
FLAG -240 576 ctl
IOPIN -240 576 Out
FLAG -80 64 IN
FLAG 512 64 Vox
FLAG 0 576 fbpos
FLAG 64 224 d
IOPIN 64 224 Out
FLAG 352 576 B
FLAG -48 736 VCC
FLAG -48 800 VSS
FLAG 320 1152 0
FLAG -160 576 ctl
FLAG -256 992 0
FLAG -240 1280 0
FLAG -32 1280 0
FLAG -240 1200 VCC
FLAG -32 1200 VSS
FLAG 592 576 OUT
FLAG -64 208 0
FLAG 1872 720 0
FLAG 1920 560 ISNS
IOPIN 1920 560 Out
FLAG 2000 1024 VCC
FLAG 2000 1088 VSS
FLAG 1808 1104 ictl
FLAG 1840 1264 0
FLAG 1872 608 ISNS
FLAG 2432 976 ISNS
FLAG 2240 1120 12VLS
FLAG 2304 1120 12VLS
IOPIN 2304 1120 BiDir
FLAG 2256 864 BI
IOPIN 2256 864 BiDir
FLAG 2304 864 AI
IOPIN 2304 864 BiDir
SYMBOL ind 304 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {Lo}
SYMATTR SpiceLine Rser={RLm}
SYMBOL cap 432 96 R0
SYMATTR InstName C1
SYMATTR Value {Co}
SYMATTR SpiceLine Rser={RCo}
SYMBOL bv 176 112 R0
SYMATTR InstName B1
SYMATTR Value V=V(IN)*V(d)
SYMBOL res 608 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1m
SYMBOL res 496 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsns
SYMATTR Value 50
SYMBOL bv 64 256 R0
WINDOW 3 -260 81 Left 2
SYMATTR Value V=limit(V(ctl),0,1)
SYMATTR InstName B3
SYMBOL OpAmps\\LT6275 -48 768 M0
SYMATTR InstName U1
SYMBOL res 208 688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {R1}
SYMBOL res -64 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {R2}
SYMBOL res 288 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {R3}
SYMBOL cap 32 640 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {C1}
SYMBOL cap 160 560 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value {C3}
SYMBOL cap -32 560 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value {C2}
SYMBOL voltage 320 1056 R0
WINDOW 3 -114 148 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 12.5 0 10m 10m 10 20)
SYMATTR InstName V1
SYMBOL res 208 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R3}
SYMBOL res -160 896 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value {R2}
SYMBOL cap 48 864 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value {C1}
SYMBOL cap -32 976 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value {C2}
SYMBOL cap 320 816 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value {C3}
SYMBOL res 288 880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {R1}
SYMBOL voltage -240 1184 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL voltage -32 1184 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -15
SYMBOL bi -64 128 R0
WINDOW 3 -197 69 Left 2
SYMATTR Value I=-I(B1)*V(d)
SYMATTR InstName B2
SYMBOL bv 1872 624 R0
SYMATTR InstName B4
SYMATTR Value V=I(VSNS)*8/350
SYMBOL voltage 576 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VSNS
SYMATTR Value 0
SYMBOL OpAmps\\LT6275 2000 1056 M0
SYMATTR InstName U2
SYMBOL res 1984 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R12}
SYMBOL res 2224 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {R11}
SYMBOL cap 2064 928 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 35 18 VTop 2
SYMATTR InstName C8
SYMATTR Value {C11}
SYMBOL cap 2016 848 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value {C13}
SYMBOL cap 2064 1184 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value {C11}
SYMBOL res 1984 1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {R12}
SYMBOL cap 2016 1248 R90
WINDOW 0 44 -39 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value {C13}
SYMBOL res 2224 1104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value {R11}
SYMBOL bv 320 944 R0
SYMATTR InstName B5
SYMATTR Value V=V(ictl)
SYMBOL res 2336 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 50
SYMBOL res 2448 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 1m
TEXT 424 288 Left 2 !.param Lo=3.3u
TEXT 424 312 Left 2 !.param Co=30m
TEXT 640 856 Left 2 !.param fz2=600
TEXT 640 888 Left 2 !.param fp0=1
TEXT 640 920 Left 2 !.param fp1=10000
TEXT 640 952 Left 2 !.param fp2=10000
TEXT 640 824 Left 2 !.param fz1=500
TEXT 640 792 Left 2 !.param G0=1.6e5
TEXT -32 8 Left 3 ;POWERTRAIN
TEXT -184 496 Left 3 ;VLOOP
TEXT 888 560 Left 2 !.measure myR2 param R2
TEXT 888 584 Left 2 !.measure myR3 param R3
TEXT 888 488 Left 2 !.measure myC1 param C1
TEXT 888 512 Left 2 !.measure myC2 param C2
TEXT 888 536 Left 2 !.measure myC3 param C3
TEXT 888 640 Left 2 !.param R1=10k\n.param fc=2.4k\n.param Gfc=-5\n.param G = pow(10,Gfc/20)\n.param boost = 145\n.param fp12 = fc/(tan((45-({boost/4)})*pi/180))\n.param fz12 = pow(fc,2)/fp12\n*.param fz1 = fz12\n*.param fz2 = fz12\n*.param fp1 = fp12\n*.param fp2 = fp12\n.param a = sqrt(pow(fc,2)/pow(fp1,2)+1)\n.param b = sqrt(pow(fc,2)/pow(fp2,2)+1)\n.param c = sqrt(pow(fz1,2)/pow(fc,2)+1)\n.param d = sqrt(pow(fc,2)/pow(fz2,2)+1)\n.param R2 = ((a*b/(c*d))/(fp1-fz1))*R1*G*fp1\n.param R3 = R1*fz2/(fp2-fz2)\n.param C1 = 1/(2*pi*fz1*R2)\n.param C2 = C1/(C1*R2*2*pi*fp1-1)\n.param C3 = (fp2-fz2)/(2*pi*R1*fp2*fz2)
TEXT 928 32 Left 2 ;generic forward topology in continuous conduction mode with compensation\napplicable for fixed frequency:\nnon-isolated forward/buck\nisolated forward\nphase shifted full bridge
TEXT 632 288 Left 2 !.param RLm=5m
TEXT 632 312 Left 2 !.param RCo=1m
TEXT 360 1008 Left 2 ;current loop adjustment
TEXT 2544 960 Left 2 !.param ifp0 = 550
TEXT 2544 1024 Left 2 !.param ifp1=300
TEXT 2544 992 Left 2 !.param ifz1=200
TEXT 2544 1120 Left 2 !.param C11=1/(2*pi*R11*ifp0)
TEXT 2544 1152 Left 2 !.param R12=(ifp0*R11)/ifz1
TEXT 2544 1184 Left 2 !.param C13=ifz1/(2*pi*R11*ifp0*ifp1)
TEXT 2544 1088 Left 2 !.param R11=10k
TEXT 2480 488 Left 3 ;ILOOP
TEXT 2544 928 Left 2 !.param iG0=1
TEXT 2544 1240 Left 2 !.measure myC11 param C11
TEXT 2544 1264 Left 2 !.measure myC13 param C13
TEXT 2544 1288 Left 2 !.measure myR12 param R12
TEXT 928 -24 Left 4 ;hoang pham 2022
RECTANGLE Normal 896 432 -320 -32 2
RECTANGLE Normal 1568 1392 -320 464 2
RECTANGLE Normal 3168 1392 1648 464 2
